<html lang="en" class="">
<head>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css">
    <script src="./js/jquery.min.js"></script>
</head>
<body>
    <div id="app">
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
        <div class="container">
            <div class="page-header">
                    <button id="_login_button" class="button login_button" onclick="login()">Login</button>
                <span id="timeline-header">Goods</span>
                <div style="float:right"><a href="/"><button id="_login_button" class="button login_button">publish</button></a><!--<a href="/" class="ml-3">publish</a>--></div>
            </div>
        </div>
        <div class="container">
            <label class="col-sm-3">Email</label>
            <span class="col-sm-10">
                <input type="text" style="padding-top:10px;margin-bottom:10px;" class="form-control" id="emailinput" placeholder="Your name">
            </span>
        </div>
        <div class="container">
            <ul class="list-group">
                <li v-for="(i,item) in times" :key="i" class="list-group-item">
                    <button type="button" class="btn btn-default btn-xs" style="float:right" @click="buyitem(item)">Buy</button>
                        <!-- <span class="badge">新</span> -->
                    id:{{item.id}} seller:{{item.seller}} price:{{item.price/10000}} 
                </li>
            </ul>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/vue/1.0.26/vue.js"></script>
    <script src="./js/eos.min.js"></script>
    <script src="./js/scatter.min.js"></script>
    <script src="./js/eos.signature.js"></script>

    <script>
        new Vue({
            el: '#app',

            data: {
                times: []
            },
            created: async function () {
                this.times = await window.getGoods();
                console.log(this.times);
            },
            methods: {
                buyitem(item){
                    const email = $('#emailinput')[0].value;
                    alert('我不知道怎么用这个email，反正你的email是' + email);
                    window.transferEOS({
                        amount: item.price/10000,
                        memo: `buy ${item.id}`
                    })
                }
            }
        });
    </script>

    <link href="./css/core.css" rel="stylesheet">
</body>
</html>